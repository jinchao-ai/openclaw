name: Monitor OpenClaw Release
on:
  # ç›‘å¬ Release å‘å¸ƒäº‹ä»¶
  release:
    types: [published]
  # å¯é€‰ï¼šæ‰‹åŠ¨è§¦å‘æµ‹è¯•
  workflow_dispatch:

jobs:
  send-notification:
    runs-on: ubuntu-latest
    steps:
      - name: Get release info
        id: release_info
        run: |
          # æå–ç‰ˆæœ¬æ›´æ–°çš„å…³é”®ä¿¡æ¯
          echo "VERSION=${{ github.event.release.tag_name }}" >> $GITHUB_ENV
          echo "TITLE=${{ github.event.release.name }}" >> $GITHUB_ENV
          echo "DESCRIPTION=${{ github.event.release.body }}" >> $GITHUB_ENV
          echo "URL=${{ github.event.release.html_url }}" >> $GITHUB_ENV

      - name: Send DingTalk notification
        uses: qianxiaobei/dingtalk-action@v1.0.0
        with:
          # æ›¿æ¢ä¸ºä½ çš„é’‰é’‰æœºå™¨äºº Webhook åœ°å€
          webhook: ${{ secrets.DINGTALK_WEBHOOK }}
          # è‡ªå®šä¹‰é€šçŸ¥å†…å®¹æ ¼å¼
          msgtype: markdown
          content: |
            ### ğŸš¨ OpenClaw æ–°ç‰ˆæœ¬å‘å¸ƒ ğŸš¨
            - **ç‰ˆæœ¬å·**: ${{ env.VERSION }}
            - **æ ‡é¢˜**: ${{ env.TITLE }}
            - **æ›´æ–°å†…å®¹**: ${{ env.DESCRIPTION }}
            - **æŸ¥çœ‹è¯¦æƒ…**: [ç‚¹å‡»è·³è½¬](${{ env.URL }})
